general:
    name: ibes
csv:
    -
        tabletype: ibes
        encoding: ISO-8859-1
        transforms:
            -   foo: parse_date_ibes
                module: graph_cast.util.transform
                input:
                    - ANNDATS
                    - ANNTIMS
                output:
                    - datetime_announce
            -   foo: parse_date_ibes
                module: graph_cast.util.transform
                input:
                    - REVDATS
                    - REVTIMS
                output:
                    - datetime_review
            -   foo: cast_ibes_analyst
                module: graph_cast.util.transform
                input:
                    - ANALYST
                output:
                    - last_name
                    - initial
        vertex_collections:
            -
                type: ticker
                map_fields:
                    CUSIP: cusip
                    CNAME: cname
                    OFTIC: oftic
            -
                type: agency
                map_fields:
                    ESTIMID: aname
            -
                type: analyst
                transforms:

            -
                type: recommendation
                map_fields:
                    ERECCD: erec
                    ETEXT: etext
                    IRECCD: irec
                    ITEXT: itext
            -
                type: publication
        weights:
            -
                edge_collections:
                    -
                        source:
                            name: analyst
                        target:
                            name: agency
                        fields:
                            - datetime_review
                            - datetime_announce
vertex_collections:
    publication:
        basename: publications
        fields:
            - _key
            - datetime_review
            - datetime_announce
        index:
            - _key
        extra_index:
            -   type: hash
                unique: false
                fields:
                    - datetime_review
            -   type: hash
                unique: false
                fields:
                    - datetime_announce
    ticker:
        basename: tickers
        fields:
            - cusip
            - cname
            - oftic
        index:
            - cusip
            - cname
            - oftic
    agency:
        basename: agencies
        fields:
            - aname
        index:
            - aname
    analyst:
        basename: analysts
        fields:
            - last_name
            - initial
        index:
            - last_name
            - initial
    recommendation:
        basename: recommendations
        fields:
            - erec
            - etext
            - irec
            - itext
        index:
            - irec
edge_collections:
    -
        source: publication
        target: ticker
    -
        source: analyst
        target: agency
    -
        source: analyst
        target: publication
    -
        source: publication
        target: recommendation
