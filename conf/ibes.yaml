general:
    name: ibes
csv:
    -
        filetype: ibes
        encoding: ISO-8859-1
        vertex_collections:
            -
                type: ticker
                map_fields:
                    CUSIP: cusip
                    CNAME: cname
                    OFTIC: oftic
            -
                type: agency
                map_fields:
                    ESTIMID: aname
            -
                type: analyst
                transforms:
                    -   foo: cast_ibes_analyst
                        module: graph_cast.util.transform
                        input:
                            - ANALYST
                        output:
                            - last_name
                            - initial
            -
                type: recommendation
                map_fields:
                    ERECCD: erec
                    ETEXT: etext
                    IRECCD: irec
                    ITEXT: itext
        weights:
            -
                map_fields:
                    ANNDATS: date_announce
                    ANNTIMS: time_announce
                    REVDATS: date_review
                    REVTIMS: time_review
                transforms:
                    -
                        foo: parse_date_ibes
                        module: graph_cast.util.transform
                        input:
                            - date_announce
                            - time_announce
                        output:
                            - datetime_announce
                    -
                        foo: parse_date_ibes
                        module: graph_cast.util.transform
                        input:
                            - date_review
                            - time_review
                        output:
                            - datetime_review
                edges:
                    -
                        source:
                            name: analyst
                        target:
                            name: agency
                    -
                        source:
                            name: analyst
                        target:
                            name: ticker
                    -
                        source:
                            name: analyst
                        target:
                            name: recommendation
                    -
                        source:
                            name: recommendation
                        target:
                            name: ticker
vertex_collections:
    ticker:
        basename: tickers
        fields:
            - cusip
            - cname
            - oftic
        index:
            - oftic
    agency:
        basename: agencies
        fields:
            - aname
        index:
            - aname
    analyst:
        basename: analysts
        fields:
            - last_name
            - initial
        index:
            - last_name
            - initial
    recommendation:
        basename: recommendations
        fields:
            - erec
            - etext
            - irec
            - itext
        index:
            - irec
edge_collections:
    -
        - analyst
        - ticker
    -
        - analyst
        - agency
    -
        - analyst
        - recommendation
    -
        - recommendation
        - ticker
