general:
    name: kg_v0
json:
    type: item
    weights:
        - source:
              name: concept
          target:
              name: concept
          vertex:
              - name: publication
                field: id
    edges:
        -
            how: all
            source:
                name: publication
            target:
                name: concept
                anchor: meta
                fields:
                    - anchor
#    weights:
#        - source:
#              name: publication
#          target:
#              name: concept
#          vertex:
#              - name: publication
#                field: id
#                condition:
#                    anchor: main
    maps:
        -
            how: dict
            name: publication
            map:
                publication_id: id

        -
            type: item
            descend_key: triples
            maps:
                -
                    type: list
                    maps:
                        -
                            type: item
                            edges:
                                -
                                  how: all
                                  source:
                                      name: concept
                                      anchor: meta
                                  target:
                                      name: concept
                                      anchor: core
                                      weight_exclusive:
                                          - tritype
                            maps:
                                -
                                    type: item
                                    descend_key: triple_meta
                                    maps:
                                        -
                                            how: dict
                                            __extra:
                                                anchor: meta
                                            name: concept
                                -
                                    type: list
                                    descend_key: triple
                                    maps:
                                        -
                                            how: dict
                                            __extra:
                                                anchor: core
                                            name: concept
                                            map:
                                                type: tritype


vertex_collections:
    collections:
        publication:
            basename: publications
            fields:
                - id
            index:
                - id
        concept:
            basename: concepts
            fields:
                - hash
                - text
            index:
                - hash

